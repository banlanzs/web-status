# 修复记录：暂停监控状态及详情页问题 (Paused Status & Detail Fixes)

## 1. 状态条显示 (Dashboard Status Bar)
**问题**: 暂停监控在状态条上显示为 100% 可用（绿色）。
**修复**:
*   **重构日志逻辑**: 引入时间重叠检测，精准计算每日暂停时长。
*   **优化 UI**: 暂停日期显示为灰色，Tooltip 提示 "已暂停"。
*   **各种状态优先级**: 未来 > 暂停 > 故障 > 正常。

## 2. 90天可用率计算 (90-Day Uptime Ratio)
**问题**: 监控暂停期间，90天可用率每天下降（因为暂停时间被计入总时间但未计入可用时间）。
**修复**:
*   **排除暂停时间**: 修改 `calculateUptime` 算法，从分母（总监控时长）中扣除暂停时长 (`pausedDuration`)。
*   **效果**: 暂停期间可用率保持不变，不再产生误导性下降。

## 3. 详情页日志缺失及排序异常 (Detailed Logs & Sorting)
**问题**: 
1. 详情页未显示最新的状态变更日志（如暂停/启动）。
2. 当 API 返回同一秒内（并发）的 "恢复(Up)" 和 "暂停(Paused)" 事件时，列表错误地将 "Up" 显示为最新状态。

**修复**:
*   **扩展 API 请求**: 在请求参数 `log_types` 中增加 `98` (启动/Started) 类型，确保完整历史。
*   **确定性排序 (Deterministic Sorting)**:
    *   **后端计算 (升序)**: 强制规则 `Up < Paused` (先恢复再暂停)，确保持续时间计算正确。
    *   **前端展示 (降序)**: 强制规则 `Paused > Up` (暂停优先)，确保列表顶部显示当前真实的暂停状态，避免被瞬间的 "Up" 事件掩盖。
